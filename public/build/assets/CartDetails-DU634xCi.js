import{r as y,j as e,S as l}from"./app-jYtbDyJ1.js";import{B as u}from"./button-BTuSyLP_.js";import{c as x}from"./utils-jAU0Cazi.js";import{U as h}from"./user-layout-BQaRG1Vd.js";import{CartActions as v}from"./CartActions-z1UEAzxE.js";import{a as C}from"./http-Crzcnt2J.js";/* empty css            */import"./Navbar-CrYFI85a.js";import"./createLucideIcon-BVkEf1E1.js";import"./settings-DbazbBUG.js";import"./x-DktvfMmH.js";const E=({auth:f,no_of_items:o=0,items:s,total:g=0})=>{var a;const[t,j]=y.useState(g),b=async()=>{try{const r=await C("orders");l.visit(route("cart.proceedOrder",{order_number:r.order_number}),{method:"get",preserveScroll:!0}),console.log("response.order_number",JSON.stringify(r.order_number,null,2))}catch(r){console.error("Checkout failed:",r)}},N=()=>{l.reload({replace:!0,only:["total"],onSuccess:r=>{r.props.total&&j(r.props.total)}})};return(a=s==null?void 0:s.data)!=null&&a.length?e.jsx(h,{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 w-full",children:[e.jsx("div",{className:"flex-1 space-y-3",children:s.data.map((r,w)=>{var d,c,n,i,m,p;return e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full p-3 rounded-lg border border-border/40 bg-card transition-all hover:shadow-sm",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("picture",{children:[e.jsx("source",{srcSet:(d=r.product)==null?void 0:d.image,type:"image/webp"}),e.jsx("img",{src:(c=r.product)==null?void 0:c.image,alt:((n=r.product)==null?void 0:n.name)??"Product Image",className:"w-32 h-full object-contain bg-foreground/5 rounded-lg",width:"128",height:"128",loading:"lazy"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-1 sm:gap-2 p-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:(i=r.product)==null?void 0:i.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",r.quantity]}),e.jsxs("p",{className:"text-base font-medium",children:["Price: ",(m=r.product)==null?void 0:m.price]}),e.jsx("div",{className:"mt-2",children:e.jsx(v,{product_id:(p=r.product)==null?void 0:p.id,isAvailable:!0,minQty:0,user:f,cartItem:r.quantity,onAddToCart:N,className:"w-32"})})]})]},r.id??w)})}),e.jsxs("div",{className:x("lg:sticky top-6 h-fit","w-full sm:w-96 md:w-80 xl:w-96","bg-card rounded-lg p-4 border border-border/40","transition-all","fixed bottom-0 left-0 right-0 z-50 shadow-lg","lg:relative lg:bg-inherit lg:shadow-none lg:border-0"),children:[e.jsx("h2",{className:"font-bold text-lg",children:"Order Summary"}),e.jsxs("p",{className:"text-muted-foreground text-sm mt-1",children:[o," ",o===1?"item":"items"]}),e.jsxs("div",{className:"flex justify-between font-semibold mt-4",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:t})]}),e.jsx(u,{size:"lg",variant:"secondary",disabled:t==0,className:x("w-full mt-4 rounded-full",{"opacity-50 cursor-not-allowed":t==0}),onClick:b,children:"Proceed to Checkout"})]})]})}):e.jsx(h,{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsx("h2",{className:"text-2xl font-semibold text-muted-foreground",children:"Your cart is empty"}),e.jsx(u,{variant:"link",onClick:()=>l.visit("/products"),className:"mt-4",children:"Continue Shopping"})]})})};export{E as default};
