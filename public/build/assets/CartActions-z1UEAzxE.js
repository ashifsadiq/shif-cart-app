import{m as D,r as O,j as e,S as C}from"./app-jYtbDyJ1.js";import{B as x}from"./button-BTuSyLP_.js";import{c as m}from"./utils-jAU0Cazi.js";import{a as h}from"./http-Crzcnt2J.js";/* empty css            */const Q=({product_id:g,isAvailable:u=!0,price:a,cartItem:w=0,isLoading:n=!1,onAddToCart:s,onBuyNow:R,buttonVariant:y="default",className:j,user:i,minQty:b=1,...v})=>{const o=(i==null?void 0:i.user)!=null,{data:d}=D({product_id:g}),N=o&&u&&!n,c=!u||n||!o,[l,p]=O.useState(w),f=async()=>{try{const t=await h(route("cart.add"),d),{message:P,item:r}=t;s==null||s(r.quantity),p(r.quantity)}catch(t){console.log("error",JSON.stringify(t,null,2))}},k=async()=>{try{const t=await h(route("cart.remove"),d),{message:P,item:r}=t;s==null||s(r.quantity),p(r.quantity)}catch(t){console.log("error",JSON.stringify(t,null,2))}},S=()=>a&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-lg font-semibold",children:a}),e.jsx("meta",{itemProp:"price",content:a.replace(/\D+/g,"")}),e.jsx("meta",{itemProp:"priceCurrency",content:"INR"})]}),q=()=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-1 rounded-md border border-input p-1",children:[e.jsx("button",{type:"button",onClick:k,disabled:l<=b||c,"aria-label":"Decrease quantity",className:"flex h-8 w-8 items-center justify-center rounded-full p-0 transition-colors hover:bg-accent focus:outline-none focus:ring-2 focus:ring-ring disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsx("span",{className:m("min-w-[2rem] text-center text-lg font-medium",o?"":"text-muted-foreground"),"aria-live":"polite",children:l}),e.jsx("button",{type:"button",onClick:f,disabled:c,"aria-label":"Increase quantity",className:"flex h-8 w-8 items-center justify-center rounded-full p-0 transition-colors hover:bg-accent focus:outline-none focus:ring-2 focus:ring-ring disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),S()]}),B=()=>e.jsx("div",{className:"flex w-full flex-wrap gap-2",children:N?e.jsxs(x,{type:"button",variant:y,size:"lg",disabled:c,onClick:f,className:m("flex-1 cursor-pointer",n&&"opacity-90"),"aria-label":"Add to cart",children:[e.jsx("span",{itemProp:"offers",itemScope:!0,itemType:"https://schema.org/Offer",children:e.jsx("meta",{itemProp:"url",content:"#add-to-cart"})}),n?"Adding...":"Add to Cart"]}):o?e.jsx("p",{className:"text-sm text-muted-foreground",children:"This item is unavailable."}):e.jsx(x,{onClick:()=>C.get(route("login",{redirect:window.location.pathname+window.location.search})),variant:"destructive",className:"cursor-pointer",children:"Sign in to add to cart"})});return e.jsx("div",{...v,itemScope:!0,itemType:"https://schema.org/Offer",className:m("flex flex-col gap-4",j),children:l?q():B()})};export{Q as CartActions,Q as default};
